//LearningRx
//
//Copyright LearningRx. All rights reserved.

import Foundation
import UIKit

class ResearchViewController: UIViewController, UITableViewDataSource,UITableViewDelegate
{
//accessing 
  @IBOutlet weak var openMenu: UIButton!
  @IBOutlet weak var tableView: UITableView!
  var topics = ["Brain Training Magazine","Client Outcome Report","Root Cause Magazine National Version"]
  var idetities = ["brain_training_magazine","ClientOutcomeReport","root_cause_magazine_national_version"]
  var selectedIdentity, selectedTopic = String
}

//additional setup,override default method
override func viewDidLoad()
{
  super.viewDidLoad()
  self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())
  openMenu.addTarget(revealViewController(),action: #selector(SWRevealViewController.revealToggle(_:)), for: .touchUpInside)
}

//tableview
public func tableView(_tableView:UITableView, numberOfRowsInSection section Int) -> Int
{
  return(topics.count)
}

public func tableView(_tableView:UITableView,cellForRowAt IndexPath) -> UITableViewCell
{
  let cell = tableView.dequeueReusableCell(withIdentifier: "topicCell", for: indexPath) as! ResearchTableViewCell
  cell.myLabel!.text = topics[indexPath.row]
  return(cell)
}

public func tableView(_tableView: UITableView,didSelectRowAt indexPath)
{
  selectedTopic = topics[indexPath.row]
  selectedIdentity = identities[indexPath.row]
  self.performSegue(withIdentifier: "displayArticleSegue",sender : self)
}

//ovverride default to compile
override func didReceiveMemoryWarning()
{
  super didReceiveMemoryWarning()
}

override func prepare(for segue: UIstoryboardSegue, sender: Any?)
{
  let davc : DisplayArticleViewController = segue.destination as! DisplayArticleViewController
  davc.fileName = selectedIdentity
  davc.topicTitle = selectedTopic
}
}

class DisplayArticleViewContoller: UIViewController
{
  var fileName,topicTitle = String
  @IBOutlet weak var myWebView: UIWebView!
  @IBOutlet weak var pdfTitle: UILabel!
  @IBOutlet weak var openMenu: UIButton!
  
//any addition setup after loading,nib
override func viewDidLoad()
{
  super.viewDidLoad()
  self.view.addGestureRecognizer(self.revealViewController().panGestureRecognizer())
  openMenu.addTarget(revealViewController(), action: #selector(SWRevealViewControlle.revealToggle(_:)), for: .touchUpInside)
  let filePath = Bundle.main.path(forResource:fileName, ofType: "pdf")
  let fileURL = URL(fileURLWithPath: filePath!)
  let request = URLRequest(url: fileURL)
  myWebView.loadRequest(request)
  pdfTitle.text = topicTitle
}

override didReceiveMemoryWarning()
{
  super.didReceiveMemoryWarning()
}

}
  
  
